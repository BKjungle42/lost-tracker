<html>
    <head>
        <style>
            BODY{
                max-width: 360px;
                margin: auto;
                margin-top: 3em;
            }
            DIV.group{
                border: 1px solid black;
                border-radius: 5px;
                margin: 0.5em 1em;
                padding: 2em 1em;
            }
            DIV.group:hover{
                background: #ccc;
            }
            DIV.state_0 {
               background: #ffffff;
            }
            DIV.state_1 {
               background: #ffffaa;
            }
            DIV.state_2 {
               background: #aaffaa;
            }
            H1, H2 {
               text-align: center;
            }
            #contact {
               font-size: x-small;
               text-align: center;
               position: fixed;
               background: #fff;
               top: 0px;
               left: 0px;
               width: 100%;
               height: 3em;
               border-bottom: 1px solid black;
            }
           .cancelled {
               text-decoration: line-through;
               color: #aaa;
           }
        </style>
        <meta http-equiv="refresh" content="300" />
    </head>
    <body>
        <h1>{{station.name}}</h1>
        <h2><a href="{{url_for('index')}}">Zeréck op d'Haaptsäit</a></h2>
        <div id="contact">Contact info</div>
            {% for row in group_states %}
            <div class="group state_{{row[1]}} {{row[0].cancelled and 'cancelled' or ''}}" onclick="advanceState({{row[0].id}});">
                {% set icon_file = 'icons/%s.png' % row[1] %}
                <img id="icon_{{station.id}}_{{row[0].id}}" src="{{url_for('static', filename=icon_file)}}" />
                {{row[0].name}}<br />
            </div>
            {% endfor %}
        </table>
        <script type="text/javascript" src="{{url_for('static', filename='js/jquery-1.6.1.min.js')}}"></script>
        <script type="text/javascript">
            function advanceState(groupId){
                $.getJSON('/advance/'+groupId+'/'+{{station.id}},
                function(data){
                        if (data.new_state === undefined){
                            return;
                        }
                        var elem = document.getElementById('icon_'+data.station_id+'_'+data.group_id);
                        if (elem){
                        elem.src = '{{url_for('static', filename='icons')}}/'+data.new_state+'.png';
                        }
                });
            }
        </script>
    </body>
</html>
